<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catalogue - Fenua Concess</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/png" href="assets/logo1.png">
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <h2>Fenua Concess</h2>
  <a href="index.html">Accueil</a>
  <a href="catalogue_p.html">Catalogue</a>
  <a href="#evenements">Événements</a>
  <a href="login.html" class="logout">Se connecter</a>
</div>

<!-- Header -->
<header>Fenua Concess - Catalogue</header>

<!-- Main content -->
<div class="main-content">

  <button class="back-btn" onclick="window.location.href='index.html'">⬅ Retour</button>

  <table id="catalogueTable">
    <thead>
      <tr>
        <th>Véhicule</th>
        <th>Prix vente</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

</div>

<button id="scrollTopBtn" title="Remonter en haut">↑</button>

<script>
// Lecture du CSV
fetch('catalogue.csv')
  .then(res => res.text())
  .then(data => {
    const rows = data.split('\n').slice(1); // Ignore header
    const tbody = document.querySelector('#catalogueTable tbody');
    let currentCategory = '';

    rows.forEach(row => {
      if(row.trim() === '') return;
      const cols = row.split(';').map(c => c.trim());

      // Catégorie
      if(cols[0] && !cols[1] && !cols[2]){
        currentCategory = cols[0];
        const tr = document.createElement('tr');
        const td = document.createElement('td');
        td.colSpan = 2;
        td.textContent = currentCategory;
        td.style.fontWeight = 'bold';
        td.style.backgroundColor = '#f0f0f0';
        tr.appendChild(td);
        tbody.appendChild(tr);
      } 
      // Véhicule
      else if(cols[0]){
        const tr = document.createElement('tr');
        tr.title = currentCategory;
        const tdNom = document.createElement('td');
        tdNom.textContent = cols[0];
        const tdPrix = document.createElement('td');
        tdPrix.textContent = cols[2] || '-'; // Prix vente uniquement
        tr.appendChild(tdNom);
        tr.appendChild(tdPrix);
        tbody.appendChild(tr);
      }
    });
  })
  .catch(err => console.error("Erreur lecture CSV :", err));

// Scroll Top
const scrollBtn = document.getElementById('scrollTopBtn');
window.onscroll = function() {
  if(document.body.scrollTop > 100 || document.documentElement.scrollTop > 100){
    scrollBtn.style.display = "block";
  } else {
    scrollBtn.style.display = "none";
  }
};
scrollBtn.addEventListener('click', () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});

// Bloquer clic droit et touches inspecteur
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('keydown', function(e) {
  if(e.key === "F12" || e.keyCode === 123) e.preventDefault();
  if(e.ctrlKey && e.shiftKey && ['I','J','C'].includes(e.key.toUpperCase())) e.preventDefault();
  if(e.ctrlKey && (e.key.toUpperCase() === 'U' || e.keyCode === 85)) e.preventDefault();
});
document.addEventListener('dragstart', e => e.preventDefault());
document.addEventListener('selectstart', e => e.preventDefault());
</script>

</body>
</html>
