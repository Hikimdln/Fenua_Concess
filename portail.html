<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portail Interne - Fenua Concess</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/png" href="assets/logo1.png">
<style>
/* --- Sidebar spécifique --- */
#userBlock {
  text-align: center;
  padding: 20px 10px 10px 10px;
}

#usernameDisplay {
  font-weight: 900; /* Gros gras */
  font-size: 1.3rem;
  margin-bottom: 5px;
}

#usernameLine {
  height: 2px;
  background: #fff;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<!-- Sidebar -->
<div class="sidebar">
  <div id="userBlock">
    <div id="usernameDisplay"></div>
    <div id="usernameLine"></div>
  </div>
  <h2>Fenua Concess</h2>
  <a href="portail.html">Accueil</a>
  <a href="catalogue.html">Catalogue</a>
  <a href="factures.html">Factures</a>
  <a href="index.html" class="logout" id="logoutBtn">Déconnexion</a>
</div>

<!-- Header -->
<header>Portail Interne</header>

<!-- Main content -->
<div class="main-content">
  <h2 id="welcomeMessage" style="margin-bottom: 20px; color:#333;"></h2>

  <div class="cards">
    <div class="card">
      <h3>Catalogue</h3>
      <p>Consultez le catalogue.</p>
      <a href="catalogue.html">Voir</a>
    </div>
    <div class="card">
      <h3>Factures</h3>
      <p>Créer ou envoyer une facture.</p>
      <a href="factures.html">Accéder</a>
    </div>
  </div>
</div>

<script>
// Récupère l'utilisateur connecté
const user = sessionStorage.getItem('fc_user');

if (!user) {
  window.location.href = "login.html";
} else {
  // Nom en haut de la sidebar
  document.getElementById('usernameDisplay').textContent = user;
  // Ligne sous le nom
  document.getElementById('usernameLine').style.width = '80%';
  document.getElementById('usernameLine').style.margin = '0 auto';
  document.getElementById('usernameLine').style.backgroundColor = '#fff';
  
  // Message de bienvenue
  document.getElementById('welcomeMessage').textContent = `Bienvenue, ${user}`;
}

// Déconnexion
document.getElementById('logoutBtn').addEventListener('click', () => {
  sessionStorage.removeItem('fc_user');
  window.location.href = "login.html";
});

// Protection clic droit / touches inspecteur
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('keydown', function(e) {
  if(e.key === "F12" || e.keyCode === 123) e.preventDefault();
  if(e.ctrlKey && e.shiftKey && ['I','J','C'].includes(e.key.toUpperCase())) e.preventDefault();
  if(e.ctrlKey && (e.key.toUpperCase() === 'U' || e.keyCode === 85)) e.preventDefault();
});
document.addEventListener('dragstart', e => e.preventDefault());
document.addEventListener('selectstart', e => e.preventDefault());
</script>

</body>
</html>
